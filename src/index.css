@tailwind base;
@tailwind components;
@tailwind utilities;

s html,
body,

html,
body {
    margin: 0;
    padding: 0;
}

:root {
    --app-scale: 1.05;
    /* global scale variable; update at runtime to zoom */
}

#root {
    /* Removed transform/scale which creates a new containing block
       and breaks `position: fixed` for elements like AppBar/Backdrop.
       If scaling is required, apply it to an inner container that
       does not contain fixed-positioned elements. */
}

body {
    /* background:var(--bgLight); */
    font-family: Inter, Arial, sans-serif
}

.app-root {
    min-height: 100%;
    display: flex;
    flex-direction: column;
}

.app-content {
    flex: 1
}

/* Scalable content area: change --app-scale to zoom in/out the page content
   without affecting fixed-positioned header/sidebar/backdrop. */
.app-scale {
    /* Prefer `zoom` (works in Chromium / WebKit). Fallback to transform
       when `zoom` is unsupported (e.g., Firefox). Keep transform-origin
       and width compensation so layout matches visually. */
    transform-origin: top left;
    zoom: var(--app-scale);
}

@supports not (zoom: 1) {
    .app-scale {
        transform: scale(var(--app-scale));
        width: calc(100% / var(--app-scale));
    }
}

/* iOS Safari: `zoom` is unreliable on Mobile Safari â€” force transform fallback
   for WebKit-based mobile browsers so `--app-scale` takes effect. This targets
   mobile WebKit via a feature query that succeeds in Mobile Safari. */
@supports (-webkit-overflow-scrolling: touch) {
    .app-scale {
        -webkit-transform-origin: top left;
        transform-origin: top left;
        -webkit-transform: scale(var(--app-scale));
        transform: scale(var(--app-scale));
        width: calc(100% / var(--app-scale));
    }

    /* Ensure poppers/overlays are inverse-scaled when using transform fallback */
    body .MuiPopper-root>*,
    body .MuiPopover-root .MuiPaper-root,
    body .MuiAutocomplete-popper>*,
    body .MuiMenu-root .MuiPaper-root,
    body .MuiTooltip-popper>* {
        transform-origin: top left !important;
        -webkit-transform: scale(var(--app-scale-inv)) !important;
        transform: scale(var(--app-scale-inv)) !important;
    }
}

/* Counter-scale poppers/overlays that are rendered into the document
   root (portal). When the content is scaled, poppers appended to body
   need inverse scaling so they visually match anchors inside the
   scaled area. This rule expects `--app-scale` to be set on `:root`.
*/
/* Counter-scale the popper *content* (paper/inner node) instead of
   the popper root. Popper applies inline `transform: translate(...)`
   on the root for positioning; overriding that breaks placement. By
   scaling the inner child we keep Popper translations intact while
   visually scaling menu/content to match the page scale. */
body .MuiPopper-root>*,
body .MuiPopover-root .MuiPaper-root,
body .MuiAutocomplete-popper>*,
body .MuiMenu-root .MuiPaper-root,
body .MuiTooltip-popper>* {
    /* Prefer zoom for the inverse scaling (keeps layout math intact
       in Chromium/WebKit). If zoom is unsupported, fall back to
       transform using the precomputed --app-scale-inv variable. */
    zoom: var(--app-scale-inv);
}

@supports not (zoom: 1) {

    body .MuiPopper-root>*,
    body .MuiPopover-root .MuiPaper-root,
    body .MuiAutocomplete-popper>*,
    body .MuiMenu-root .MuiPaper-root,
    body .MuiTooltip-popper>* {
        transform-origin: top left !important;
        transform: scale(var(--app-scale-inv)) !important;
    }
}

.ql-editor {
    box-sizing: border-box;
    line-height: 1.42;
    height: 300px;
    outline: none;
    overflow-y: auto;
    padding: 12px 15px;
    tab-size: 4;
    -moz-tab-size: 4;
    text-align: left;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/* Global button styles: enforce app-wide palette
   Background: var(--dark), text: var(--onPrimary), hover: var(--primary) */
button,
input[type="button"],
input[type="submit"],
.btn,
.app-button {
    background-color: var(--darkMedium);
    color: var(--onPrimary);
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 0.375rem;
    cursor: pointer;
}

button:hover,
input[type="button"]:hover,
input[type="submit"]:hover,
.btn:hover,
.app-button:hover {
    background-color: var(--primary);
}

/* Material UI button overrides (contained / outlined) */
.MuiButton-root.MuiButton-contained,
.MuiButton-contained {
    background-color: var(--darkMedium) !important;
    color: var(--onPrimary) !important;
}

.MuiButton-root.MuiButton-contained:hover,
.MuiButton-contained:hover {
    background-color: var(--primary) !important;
}

.MuiButton-root.MuiButton-outlined,
.MuiButton-outlined {
    color: var(--darkMedium) !important;
    border-color: var(--darkMedium) !important;
    background-color: transparent !important;
}

.MuiButton-root.MuiButton-outlined:hover,
.MuiButton-outlined:hover {
    background-color: var(--primary) !important;
    color: var(--onPrimary) !important;
}

/* Generic outlined helpers (non-MUI) */
button.outlined,
.btn-outlined,
.app-button.outlined,
.outlined {
    background: transparent;
    border: 1px solid var(--darkMedium);
    color: var(--darkMedium);
}

.outlined:hover,
.btn-outlined:hover,
.app-button.outlined:hover,
button.outlined:hover {
    background-color: var(--primary);
    color: var(--onPrimary);
}

/* Utility: add `app-button` class to force app colors where inline/tailwind colors exist */
.app-button {
    background-color: var(--darkMedium) !important;
    color: var(--onPrimary) !important;
}

.app-button:hover {
    background-color: var(--primary) !important;
}